<!-- templates/items_form.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Checklist Items</title>
<!-- PWA Manifest -->
<link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
<link rel="icon" href="{{ url_for('static', filename='icons/icon-192.png') }}">
<link rel="apple-touch-icon" href="{{ url_for('static', filename='icons/icon-512.png') }}">
<meta name="theme-color" content="#000000">

<!-- Service Worker Registration -->
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function () {
      navigator.serviceWorker.register("{{ url_for('static', filename='sw.js') }}")
        .then(reg => console.log('SW registered:', reg.scope))
        .catch(err => console.log('SW registration failed:', err));
    });
  }
</script>
</head>
<body>
    <h1>Checklist Items for Session ID: {{ session.id }}</h1>

    <form method="POST">
        <h3>Add New Item</h3>
        <label>Item No:</label><input type="text" name="item_no"><br>
        <label>Panel Ref:</label><input type="text" name="panel_ref"><br>
        <label>Asset Code:</label><input type="text" name="asset_code"><br>
        <label>Item Description:</label><input type="text" name="item_description"><br>
        <label>Values / Observation:</label><input type="text" name="values_observation"><br>
        <label>Any Abnormality:</label><input type="text" name="any_abnormality"><br>
        <label>Remarks:</label><input type="text" name="remarks"><br>
        <input type="submit" value="Add Item">
    </form>

    <hr>
    <h3>Existing Items</h3>
    <table border="1" cellpadding="5">
        <tr>
            <th>Item No</th>
            <th>Panel Ref</th>
            <th>Asset Code</th>
            <th>Description</th>
            <th>Observation</th>
            <th>Abnormality</th>
            <th>Remarks</th>
            <th>Actions</th>
        </tr>
        {% for i in items %}
        <tr>
            <td>{{ i.item_no }}</td>
            <td>{{ i.panel_ref }}</td>
            <td>{{ i.asset_code }}</td>
            <td>{{ i.item_description }}</td>
            <td>{{ i.values_observation }}</td>
            <td>{{ i.any_abnormality }}</td>
            <td>{{ i.remarks }}</td>
            <td>
                <a href="{{ url_for('edit_item', item_id=i.id) }}">Edit</a> |
                <a href="{{ url_for('delete_item', item_id=i.id) }}">Delete</a>
            </td>
        </tr>
        {% endfor %}
    </table>

    <br>
    <a href="{{ url_for('session_list') }}">Back to session list</a>
</body>
</html>
